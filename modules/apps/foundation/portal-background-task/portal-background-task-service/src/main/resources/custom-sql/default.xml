<?xml version="1.0"?>

<custom-sql>
	<sql id="com.liferay.portal.background.task.service.persistence.BackgroundTaskFinder.countByG_T_C">
		<![CDATA[
			SELECT
				COUNT(*) AS COUNT_VALUE
			FROM
				BackgroundTask
			[$WHERE_CONDITIONS$]
		]]>
	</sql>
	<sql id="com.liferay.portal.background.task.service.persistence.BackgroundTaskFinder.findByG_T_C">
		<![CDATA[
			SELECT
				{BackgroundTask.*}, CASE
					WHEN
						(
							(BackgroundTask.createDate IS NOT NULL) AND
							(BackgroundTask.completionDate IS NOT NULL)

						) THEN
							(BackgroundTask.completionDate - BackgroundTask.createDate)
					ELSE 0
				END as duration
			FROM
				BackgroundTask
			[$WHERE_CONDITIONS$]

		]]>
	</sql>
</custom-sql>